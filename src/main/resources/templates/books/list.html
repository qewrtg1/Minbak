<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org/">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Books</title> <!-- 🔥타이틀변경🔥 -->
  <link rel="stylesheet" href="/css/admin-layout.css?v=2">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="">
  <div class="layout-template">
    <section class="layout-sidebar">
      <ul class="layout-logoBox">
        <li>
          <a href="#" class="layout-logo"> <!-- 🔥경로지정🔥 -->
            <span class="layout-logoImg"></span>
            <span class="layout-logoText"></span>
          </a>
        </li>
      </ul>
      <ul class="layout-sideMenu">
        <li class=""> <!-- 🔥클래스변경🔥 -->
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-chart-simple"></i>
            <span class="layout-menuText">대시보드</span>
          </a>
        </li>
        <li class="">
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-user-group"></i>
            <span class="layout-menuText">유저관리</span>
          </a>
        </li>
        <li class="">
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-bed"></i>
            <span class="layout-menuText">숙소관리</span>
          </a>
        </li>
        <li class="layout-active">
          <a href="/admin/books">
            <i class="layout-menuIcon fa-solid fa-calendar-days"></i>
            <span class="layout-menuText">예약관리</span>
          </a>
        </li>
        <li class="">
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-star-half-stroke"></i>
            <span class="layout-menuText">리뷰관리</span>
          </a>
        </li>
        <li class="">
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-bullhorn"></i>
            <span class="layout-menuText">공지사항</span>
          </a>
        </li>
        <li class="">
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon fa-solid fa-comments"></i>
            <span class="layout-menuText">메세지</span>
          </a>
        </li>
      </ul>
      <ul class="layout-sideOption">
        <li>
          <a class="layout-sideOptionBtn">
            <i class="layout-menuIcon layout-option fa-solid fa-gear"></i>
            <span class="layout-menuText">설정</span>
          </a>
        </li>
        <li>
          <a href="#"> <!-- 🔥경로지정🔥 -->
            <i class="layout-menuIcon layout-logout fa-solid fa-power-off"></i>
            <span class="layout-menuText layout-logout">로그아웃</span>
          </a>
        </li>
      </ul>
    </section>
    <section class="layout-main">
      <nav class="layout-topbar">
        <i class="layout-sizeBtn fa-solid fa-bars"></i>
        <ul class="layout-topNav">
          <li><a href="/admin/books" class="layout-menuText currPath">예약관리</a></li>
        </ul>
        <div class="layout-topOption">
          <i class="layout-themeBtn"></i>
          <i class="layout-alarmBtn fa-solid fa-bell"></i>
          <span class="layout-userAvatar"><img src="/css/dummy_img/dummy-avatar.png" alt="userAvatar"></span> <!-- 🔥더미데이터🔥 -->
        </div>
      </nav>
      <h3 class="layout-contentTitle">예약리스트</h3>
      <div class="layout-contentWrap">
        <div class="layout-content">
        <!------------ 👇👇👇👇 여기에 컨텐츠 집어넣으면 됨 👇👇👇👇 ------------>
        <div class="books">
          <div class="booksHead">
            <h3>예약 관리</h3>
            <div class="menu">
              <a href="/admin/books/create">예약등록</a>
              <a href="/admin/books">예약목록</a>
            </div>
          </div>
          <div class="search">
            <h3>기본 검색</h3>
            <script>
              function searchBooks() {
                  let keyword = document.getElementsByName("keyword")[0].value.trim();
                  if (keyword === "") {
                      window.location.href = "/admin/books"; // 검색어 없으면 전체 리스트 불러오기
                  } else {
                      document.getElementById("fsearch").submit(); // 검색어 있으면 검색 실행
                  }
              }
            </script>
            <form name="fsearch" id="fsearch" method="get">
              <div class="tbl_frm01">
                <table>
                  <colgroup>
                    <col class="w100">
                    <col>
                  </colgroup>
                  <tbody>
                  <tr>
                    <th scope="row">검색어</th>
                    <td>
                      <select name="searchType">
                        <option value="예약번호">예약번호</option>
                        <option value="유저 ID">유저 ID</option>
                      </select>
                      <input type="text" name="keyword">
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">기간검색</th>
                    <td>
                      <script>
                        document.getElementById("fr_date").addEventListener("change", function() {
                          const startDate = document.getElementById("fr_date").value;
                          const endDate = document.getElementById("to_date").value;
                          const dateType = document.querySelector('input[name="dateType"]:checked')?.value;

                          if (dateType === '체크인') {
                            // 체크인 날짜만 입력되면 종료일(endDate)을 비워둡니다.
                            if (startDate && !endDate) {
                              document.getElementById("to_date").value = "";  // 종료일을 빈 값으로 설정
                            }
                          }
                        });

                        // 체크아웃 처리
                        document.querySelector('input[name="dateType"]').addEventListener("change", function() {
                          const dateType = document.querySelector('input[name="dateType"]:checked')?.value;
                          if (dateType === '체크아웃') {
                            // 체크아웃을 선택한 경우 종료일은 필수
                            document.getElementById("to_date").required = true;
                          } else {
                            document.getElementById("to_date").required = false;
                          }
                        });
                      </script>
                      <select name="dateType">
                        <option value="체크인">체크인</option>
                        <option value="체크아웃">체크아웃</option>
                      </select>
                      <label for="fr_date" class="sound_only">시작일</label>
                      <input type="date" name="startDate" value id="fr_date" class="w80" maxlength="10">
                      ~
                      <label for="to_date" class="sound_only">종료일</label>
                      <input type="date" name="endDate" value id="to_date" class="w80" maxlength="10">
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">예약상태</th>
                    <td>
                      <label>
                        <input type="radio" name="statusFilter" value="" checked="checked">전체
                      </label>
                      <label>
                        <input type="radio" name="statusFilter" value="대기">대기
                      </label>
                      <label>
                        <input type="radio" name="statusFilter" value="완료">완료
                      </label>
                      <label>
                        <input type="radio" name="statusFilter" value="만료">만료
                      </label>
                      <label>
                        <input type="radio" name="statusFilter" value="이용자 취소">이용자 취소
                      </label>
                      <label>
                        <input type="radio" name="statusFilter" value="숙박업자 취소">숙박업자 취소
                      </label>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
              <div class="btn_confirm">
                <input type="submit" value="검색" id="btn_srch">
                <input type="button" value="초기화" id="btn_init" onclick="location.href='/admin/books'">
              </div>
            </form>
          </div>
          <div id="blist">
            <h3>예약 리스트</h3>
          </div>
          <list>
            <table>
              <tr>
                <th>예약 번호</th>
                <th>예약 상태</th>
                <th>유저 ID</th>
                <th>체크인 날짜</th>
                <th>체크아웃 날짜</th>
                <th>예약인원 수</th>
                <th>특별 요청사항</th>
              </tr>
              <tr th:each="books : ${booksPage.books}">
                <td th:text="${books.bookId}"></td>
                <td th:text="${books.status}"></td>
                <td th:text="${books.userId}"></td>
                <td th:text="${books.startDate}"></td>
                <td th:text="${books.endDate}"></td>
                <td th:text="${books.guestsNum}"></td>
                <td th:text="${books.request}"></td>
                <td><a th:href="@{|/admin/books/${books.bookId}|}">상세보기</a></td>
              </tr>
            </table>
            <!-- 페이징 -->
            <div aria-label="Page navigation">
              <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${boardPageDto.hasPrev} ? '' : 'disabled'"><a class="page-link" th:href="@{/board?page={page}(page=${boardPageDto.currentPage - 1})}">«</a></li>
                <li class="page-item" th:each="i : ${#numbers.sequence(boardPageDto.startPage, boardPageDto.endPage)}">
                  <a class="page-link" th:classappend="${boardPageDto.currentPage == i} ? 'active text-white' : ''"th:href="@{/board?page={i}&category={categoryId}(i=${i},categoryId=${categoryId})}" th:text="${i}"></a>
                </li>
                <li th:class="${boardPageDto.hasNext ? 'page-item' : 'page-item disabled'}"><a class="page-link" th:href="@{/board?page={page}(page=${boardPageDto.currentPage + 1})}">»</a></li>
              </ul>
            </div>
          </list>
          <div class="booksFoot">
            <hr>
            <h4>Copyright &copy; All rights reserved.</h4>
          </div>
        </div>
        <!------------ 👆👆👆👆 여기에 컨텐츠 집어넣으면 됨 👆👆👆👆 ------------>
        </div>
      </div>
      <div class="layout-sideOptionModal">
        <a href="#" class="layout-modalText">내 프로필</a> <!-- 🔥경로지정🔥 -->
        <a href="#" class="layout-modalText">설정</a> <!-- 🔥경로지정🔥 -->
      </div>
      <div class="layout-topOptionModal">
        <a href="#" class="layout-modalText">내 프로필</a> <!-- 🔥경로지정🔥 -->
        <a href="#" class="layout-modalText">설정</a> <!-- 🔥경로지정🔥 -->
        <a href="#" class="layout-modalText layout-logout">로그아웃</a> <!-- 🔥경로지정🔥 -->
      </div>
      <div class="layout-alarmModal">
        <a href="#" class="layout-modalText">알람1<i class="layout-alarmCloseBtn fa-solid fa-xmark"></i></a> <!-- 🔥더미데이터🔥 -->
        <a href="#" class="layout-modalText">알람2<i class="layout-alarmCloseBtn fa-solid fa-xmark"></i></a> <!-- 🔥더미데이터🔥 -->
        <a href="#" class="layout-modalText">알람3<i class="layout-alarmCloseBtn fa-solid fa-xmark"></i></a> <!-- 🔥더미데이터🔥 -->
        <a href="#" class="layout-modalText">알람 내용이 겁나 길면 이렇게 됩니다아<i class="layout-alarmCloseBtn fa-solid fa-xmark"></i></a> <!-- 🔥더미데이터🔥 -->
        <div class="layout-empty">아무런 알람이 없네요!&nbsp;<i class="fa-regular fa-face-grin-wink"></i></div>
      </div>
    </section>
  </div>
  <script src=""></script> <!-- 🔥경로지정🔥 -->
  <script src="/js/admin-layout.js"></script>
  <script src="https://kit.fontawesome.com/9d620b3524.js" crossorigin="anonymous"></script>
</body>
</html>