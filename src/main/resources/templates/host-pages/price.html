<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주중/주말 요금 설정</title>
  <style>
    /* 기본 스타일 */
    body {
        font-family: Arial, sans-serif;
        background-color: #fff;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        height: 100vh;
        margin: 0;
    }
    h1 {
        color: #000;
        font-size: 24px;
    }
    form {
        text-align: center;
        width: 100%;
        max-width: 600px;
    }
    input[type="number"] {
        padding: 10px;
        width: 50%;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
    }
    .result, .final-price {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
    }
    .premium-rate {
        margin: 20px 0;
    }
    input[type="range"] {
        width: 80%;
    }
    .rate-value {
        font-size: 18px;
        margin-top: 5px;
    }
    .next-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background-color: #ff9800;
        border: none;
        padding: 15px 30px;
        font-size: 1.2rem;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
        text-decoration: none;
    }
    .next-btn:hover {
        background-color: #e68900;
    }
  </style>
</head>
<body>

<h1>이제 주중/주말 요금을 설정하세요</h1>

<form class="form-container">
  <!-- 주중 요금 입력 -->
  <input type="number" id="weekDayPrice" name="weekDayPrice" placeholder="주중 요금을 입력하세요" min="0">
  <div class="result" id="result"></div>

  <h1>주말 할증률</h1>

  <!-- 주말 할증률 설정 -->
  <div class="premium-rate">
    <label for="premiumRate">할증률 설정 (0%~100%):</label>
    <input type="range" id="premiumRate" name="premiumRate" min="0" max="100" value="0" step="1">
    <span class="rate-value" id="rateValue">0%</span>
  </div>

  <!-- 최종 요금 -->
  <div class="final-price" id="finalPrice"></div>
</form>

<!-- 다음 버튼 -->
<a href="/host/receipt" class="next-btn">다음</a>

<script>
  const weekDayPriceInput = document.getElementById('weekDayPrice');
  const resultDiv = document.getElementById('result');
  const premiumRateInput = document.getElementById('premiumRate');
  const rateValue = document.getElementById('rateValue');
  const finalPriceDiv = document.getElementById('finalPrice');

  // 페이지 로드 시 저장된 데이터 불러오기
  document.addEventListener('DOMContentLoaded', function() {
      const savedWeekDayPrice = localStorage.getItem('weekDayPrice');
      const savedPremiumRate = localStorage.getItem('premiumRate');

      if (savedWeekDayPrice !== null) {
          weekDayPriceInput.value = savedWeekDayPrice;
          resultDiv.innerHTML = `₩${parseInt(savedWeekDayPrice).toLocaleString()}`;
          updateFinalPrice(parseInt(savedWeekDayPrice));
      }
      if (savedPremiumRate !== null) {
          premiumRateInput.value = savedPremiumRate;
          rateValue.innerText = `${savedPremiumRate}%`;
          updateFinalPrice(parseInt(weekDayPriceInput.value));
      }
  });

  // 주중 요금 입력 시 localStorage에 저장
  weekDayPriceInput.addEventListener('input', function() {
      const price = parseFloat(weekDayPriceInput.value);
      if (!isNaN(price) && price > 0) {
          resultDiv.innerHTML = `₩${price.toLocaleString()}`;
          localStorage.setItem('weekDayPrice', price);
          updateFinalPrice(price);
      } else {
          resultDiv.innerHTML = '';
          finalPriceDiv.innerHTML = '';
          localStorage.removeItem('weekDayPrice');
      }
  });

  // 주말 할증률 입력 시 localStorage에 저장
  premiumRateInput.addEventListener('input', function() {
      const rate = premiumRateInput.value;
      rateValue.innerText = `${rate}%`;
      localStorage.setItem('premiumRate', rate);
      updateFinalPrice(parseFloat(weekDayPriceInput.value));
  });

  // 최종 요금 계산 (DB 저장 X, 화면에서만 표시)
  function updateFinalPrice(weekDayPrice) {
      if (isNaN(weekDayPrice) || weekDayPrice <= 0) return;

      const rate = parseFloat(premiumRateInput.value);
      const premiumPrice = weekDayPrice * (1 + rate / 100);
      finalPriceDiv.innerHTML = `예상 주말 요금: ₩${premiumPrice.toLocaleString()}`;
  }
</script>

</body>
</html>